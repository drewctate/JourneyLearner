<div id="edit-container" layout="column" layout-align="start center">
  <div>
    <div id="editctrl" flex-order-gt-sm="1" flex="grow">
      <div class="clearfix">
        <h2 class="left">Create new journey:</h2>
        <md-button ng-show="saved" ui_sref="maps({mapId: 0})" class="right">Back to Maps</md-button>
        <md-button ng-show="!saved" ui_sref="maps({mapId: 0})" class="right">Cancel</md-button>
      </div>
      <p class="error" ng-model="error" ng-show="error">{{ error }}</p>
      <form name="journeyForm">
        <md-input-container>
          <label>Jouney Name</label>
          <input name="title" ng-model="map.title" required>
          <div ng-messages="journeyForm.title.$error">
            <div ng-message="required">Your journey needs a title!</div>
          </div>
        </md-input-container>
        <md-input-container>
          <label>Short Description</label>
          <input name="description" ng-model="map.description" required>
          <div ng-messages="journeyForm.description.$error">
            <div ng-message="required">This is required!</div>
          </div>
        </md-input-container>
        <md-input-container>
          <label>Author</label>
          <input name="author" ng-model="map.author" required>
          <div ng-messages="journeyForm.author.$error">
            <div ng-message="required">Give yourself some credit.</div>
          </div>
        </md-input-container>
        <md-input-container>
          <md-button class="md-primary" ng-click="uploadImage()">Upload Image</md-button>
          <input name="image" id="file-upload" type="file" required ngf-select="upload($file)" ngf-resize="{ratio: '700:400', centerCrop: true}" ng-model="map.image" aria-label="image" accept="image/*">
          <!--<div ng-messages="journeyForm.image.$error">
            <div ng-message="required">A journey's no good without a map.</div>
          </div>-->
        </md-input-container>
      </form>
    </div>
    <div class="map-container" ng-show="map.image" md-whiteframe="3" flex-order-gt-sm="2" flex-gt-sm="nogrow" flex="grow">
      <editor map="map" saved="saved" error="error"></editor>
    </div>
    <div class="map-container" ng-show="!map.image" id="background-default" md-whiteframe="3" flex-order-gt-sm="2" flex-gt-sm="nogrow" flex="grow"></div>
  </div>
</div>
